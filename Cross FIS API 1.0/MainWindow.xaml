<Window x:Class="Cross_FIS_API_1._0.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Cross_FIS_API_1._0"
        mc:Ignorable="d"
        Title="FIS API - Warsaw Stock Exchange Instruments" 
        Height="800" 
        Width="1200"
        WindowStartupLocation="CenterScreen">
    
    <Window.Resources>
        <Style x:Key="HeaderTextStyle" TargetType="TextBlock">
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Foreground" Value="DarkBlue"/>
        </Style>
        
        <Style x:Key="StatusTextStyle" TargetType="TextBlock">
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Margin" Value="5"/>
        </Style>
        
        <Style x:Key="ButtonStyle" TargetType="Button">
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Padding" Value="10,5"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
        </Style>
    </Window.Resources>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Header -->
        <Border Grid.Row="0" Background="LightSteelBlue" Padding="10">
            <TextBlock Text="FIS API - Warsaw Stock Exchange Connection" 
                       Style="{StaticResource HeaderTextStyle}" 
                       HorizontalAlignment="Center" 
                       FontSize="18"/>
        </Border>
        
        <!-- Connection Panel -->
        <Border Grid.Row="1" Background="WhiteSmoke" Padding="10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <!-- Connection Config -->
                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <TextBlock Text="Server:" VerticalAlignment="Center" Margin="0,0,5,0"/>
                    <TextBox x:Name="ServerAddressTextBox" 
                             Text="localhost" 
                             Width="100" 
                             VerticalAlignment="Center" 
                             Margin="0,0,10,0"/>
                    
                    <TextBlock Text="Port:" VerticalAlignment="Center" Margin="0,0,5,0"/>
                    <TextBox x:Name="PortTextBox" 
                             Text="12345" 
                             Width="60" 
                             VerticalAlignment="Center" 
                             Margin="0,0,10,0"/>
                    
                    <TextBlock Text="User:" VerticalAlignment="Center" Margin="0,0,5,0"/>
                    <TextBox x:Name="UserTextBox" 
                             Text="001" 
                             Width="50" 
                             VerticalAlignment="Center" 
                             Margin="0,0,10,0"/>
                    
                    <TextBlock Text="Password:" VerticalAlignment="Center" Margin="0,0,5,0"/>
                    <PasswordBox x:Name="PasswordBox" 
                                 Password="password" 
                                 Width="80" 
                                 VerticalAlignment="Center" 
                                 Margin="0,0,10,0"/>
                </StackPanel>
                
                <!-- Status -->
                <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Center">
                    <TextBlock Text="Status:" VerticalAlignment="Center" Margin="0,0,5,0"/>
                    <TextBlock x:Name="StatusTextBlock" 
                               Text="Disconnected" 
                               Style="{StaticResource StatusTextStyle}"
                               Foreground="Red"/>
                </StackPanel>
                
                <!-- Buttons -->
                <StackPanel Grid.Column="2" Orientation="Horizontal">
                    <Button x:Name="ConnectButton" 
                            Content="Connect" 
                            Style="{StaticResource ButtonStyle}"
                            Click="ConnectButton_Click"
                            Background="LightGreen"/>
                    
                    <Button x:Name="DisconnectButton" 
                            Content="Disconnect" 
                            Style="{StaticResource ButtonStyle}"
                            Click="DisconnectButton_Click"
                            Background="LightCoral"
                            IsEnabled="False"/>
                    
                    <Button x:Name="RefreshButton" 
                            Content="Refresh" 
                            Style="{StaticResource ButtonStyle}"
                            Click="RefreshButton_Click"
                            Background="LightBlue"
                            IsEnabled="False"/>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- Instruments Grid -->
        <Grid Grid.Row="2" Margin="10">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            
            <TextBlock Grid.Row="0" 
                       Text="Listed Instruments" 
                       Style="{StaticResource HeaderTextStyle}" 
                       Margin="0,0,0,10"/>
            
            <DataGrid Grid.Row="1" 
                      x:Name="InstrumentsDataGrid"
                      AutoGenerateColumns="False"
                      CanUserAddRows="False"
                      CanUserDeleteRows="False"
                      IsReadOnly="True"
                      GridLinesVisibility="Horizontal"
                      AlternatingRowBackground="AliceBlue"
                      HeadersVisibility="Column">
                
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Symbol" 
                                        Binding="{Binding Mnemonic}" 
                                        Width="80"/>
                    
                    <DataGridTextColumn Header="Company Name" 
                                        Binding="{Binding StockName}" 
                                        Width="200"/>
                    
                    <DataGridTextColumn Header="ISIN" 
                                        Binding="{Binding ISIN}" 
                                        Width="120"/>
                    
                    <DataGridTextColumn Header="Last Price" 
                                        Binding="{Binding LastPrice, StringFormat=F2}" 
                                        Width="80">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="HorizontalAlignment" Value="Right"/>
                                <Setter Property="FontWeight" Value="Bold"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    
                    <DataGridTextColumn Header="Bid" 
                                        Binding="{Binding BidPrice, StringFormat=F2}" 
                                        Width="70">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="HorizontalAlignment" Value="Right"/>
                                <Setter Property="Foreground" Value="Blue"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    
                    <DataGridTextColumn Header="Ask" 
                                        Binding="{Binding AskPrice, StringFormat=F2}" 
                                        Width="70">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="HorizontalAlignment" Value="Right"/>
                                <Setter Property="Foreground" Value="Red"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    
                    <DataGridTextColumn Header="Change %" 
                                        Binding="{Binding PercentageChange, StringFormat=F2}" 
                                        Width="80">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="HorizontalAlignment" Value="Right"/>
                                <Setter Property="FontWeight" Value="Bold"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding PercentageChange, Converter={x:Static local:PercentageToSignConverter.Instance}}" Value="Positive">
                                        <Setter Property="Foreground" Value="Green"/>
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding PercentageChange, Converter={x:Static local:PercentageToSignConverter.Instance}}" Value="Negative">
                                        <Setter Property="Foreground" Value="Red"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    
                    <DataGridTextColumn Header="Volume" 
                                        Binding="{Binding Volume, StringFormat=N0}" 
                                        Width="100">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="HorizontalAlignment" Value="Right"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    
                    <DataGridTextColumn Header="Open" 
                                        Binding="{Binding OpenPrice, StringFormat=F2}" 
                                        Width="70">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="HorizontalAlignment" Value="Right"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    
                    <DataGridTextColumn Header="High" 
                                        Binding="{Binding HighPrice, StringFormat=F2}" 
                                        Width="70">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="HorizontalAlignment" Value="Right"/>
                                <Setter Property="Foreground" Value="Green"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    
                    <DataGridTextColumn Header="Low" 
                                        Binding="{Binding LowPrice, StringFormat=F2}" 
                                        Width="70">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="HorizontalAlignment" Value="Right"/>
                                <Setter Property="Foreground" Value="Red"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    
                    <DataGridTextColumn Header="Currency" 
                                        Binding="{Binding Currency}" 
                                        Width="60"/>
                    
                    <DataGridTextColumn Header="Trading Phase" 
                                        Binding="{Binding TradingPhase}" 
                                        Width="100"/>
                    
                    <DataGridTextColumn Header="Last Update" 
                                        Binding="{Binding LastUpdateTime, StringFormat=HH:mm:ss}" 
                                        Width="80"/>
                </DataGrid.Columns>
            </DataGrid>
        </Grid>
        
        <!-- Status Bar -->
        <Border Grid.Row="3" Background="LightGray" Padding="10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <TextBlock x:Name="StatusMessageTextBlock" 
                           Grid.Column="0"
                           Text="Ready to connect to FIS server"
                           VerticalAlignment="Center"/>
                
                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <TextBlock Text="Instruments Count:" 
                               VerticalAlignment="Center" 
                               Margin="0,0,5,0"/>
                    <TextBlock x:Name="InstrumentCountTextBlock" 
                               Text="0" 
                               VerticalAlignment="Center" 
                               FontWeight="Bold"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>